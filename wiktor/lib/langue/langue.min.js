/**
 * Langue highlighter engine
 *
 * @author      Daniels Kursits <https://github.com/evolbug>
 * @copyright   Copyright (c) 2018 Daniels Kursits <https://github.com/evolbug/langue>
 * @license     http://opensource.org/licenses/MIT MIT License
 */
var{Language:Language,langue:langue,c:c,kw:kw,sw:sw,p:p,s:s,skip:skip}=function(){function e(e){return e.replace(new RegExp("[.*+?^${}()|[\\]\\\\]","gm"),"\\$&")}function t(e){return e.replace(new RegExp("&","gm"),"&amp;").replace(new RegExp("<","gm"),"&lt;").replace(new RegExp(">","gm"),"&gt;").replace(new RegExp('"',"gm"),"&quot;").replace(new RegExp("'","gm"),"&#039;")}function n(e,t){let n=new RegExp("("+t+")");return(l,a=0,r="ym")=>{if(r){let n=new RegExp("(\\s*"+t+"\\s*)",r);n.lastIndex=a;let s=n.exec(l);return s?{class:e,value:s[1],index:s.index}:false}else{let t=n.exec(l.substr(a));return t?{class:e,value:t[1],index:t.index+a}:false}}}function l(e,...t){let l=e.reduce((e,n,l)=>`${e}${n}${t[l]?t[l]:""}`,"");return n("special",l)}function a(e,...t){let l=e.reduce((e,n,l)=>`${e}${n}${t[l]?t[l]:""}`,"");return n("punctuation",l)}function r(e,...t){let l=e.reduce((e,n,l)=>`${e}${n}${t[l]?t[l]:""}`,"");return n("keyword",l)}function s(t,...l){let a=t.reduce((e,t,n)=>`${e}${t}${l[n]?l[n]:""}`,"");return n("string",a.split("|").map(e=>e.trim()).map(t=>{t=t.split(",").map(t=>e(t.trim()));return`(?:${t[0]}(?:\\\\\\\\|\\\\${t[1]}|.|\\s)*?${t[1]})`}).join("|"))}function u(t,...l){let a=t.reduce((e,t,n)=>`${e}${t}${l[n]?l[n]:""}`,"");return n("comment",a.split("|").map(e=>e.trim()).map(t=>{t=t.split(",").map(t=>e(t.trim()));return`(?:${t[0]}(?:.|\\s)*?${t[1]})`}).join("|"))}function c(e,...t){let l=e.reduce((e,n,l)=>`${e}${n}${t[l]?t[l]:""}`,"");return n("",l)}function i(e,t,n=0){let l={matches:[],lastIndex:n};let a=n;for(let n=0;n<t.length;n++){let r=t[n];if(Array.isArray(r)){let t=i(e,r,l.lastIndex);while(t&&t.lastIndex>a){a=t.lastIndex;l.matches=l.matches.concat(t.matches);l.lastIndex=t.lastIndex;t=i(e,r,l.lastIndex)}}else{let t=r(e,l.lastIndex);if(!t)return false;l.lastIndex=t.index+t.value.length;l.matches.push(t)}}return l}function p(e){return function(n){let l=true;let a=[];let r=0;let s=-1;while(l&&r>s){let t=[];l=false;s=r;for(let a=0;a<e.length;a++){let s=e[a][0](n,r,false);if(s){l=true;t.push({pattern:a,match:s})}}t=t.sort((e,t)=>e.match.index-t.match.index);for(let l of t){let t=i(n,e[l.pattern],l.match.index);if(t){r=t.lastIndex;a=a.concat(t.matches);break}}}let u=[];let c=0;for(let e=0;e<a.length;e++){u.push(t(n.slice(c,a[e].index)));u.push(`<span class='${a[e].class}'>${t(a[e].value)}</span>`);c=a[e].index+a[e].value.length}u.push(t(n.slice(c)));return u.join("")}}function g(e,t){if(g.languages[t]){return g.languages[t](e)}else{console.error(`requested language ${t} is not defined`);return e}}g.auto=function(e){if(e.className)e.innerHTML=g(e.innerText,e.className.match(/language-(\w+)/)[1])};g.languages={};g.syntax={};return{Language:p,langue:g,c:u,kw:r,sw:l,p:a,s:s,skip:c}}();
